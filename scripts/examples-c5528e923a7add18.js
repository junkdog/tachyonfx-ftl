class ExamplePanel{constructor(){this.examples=[];this.filteredExamples=[];this.currentCategory=`all`;this.currentExample=null;this.searchTerm=``;this.initializeWhenReady()}initializeWhenReady(){if(window.wasmBindings&&window.wasmBindings.get_example_list){this.loadExamplesList()}else{setTimeout(()=>this.initializeWhenReady(),100)}}async loadExamplesList(){try{const a=window.wasmBindings.get_example_list();this.examples=JSON.parse(a);this.filteredExamples=[...this.examples];this.populateCategoryFilter();this.renderExamplesPanel();this.bindEventListeners();console.log(`Loaded ${this.examples.length} examples from Rust backend`)}catch(a){console.error(`Failed to load examples from Rust backend:`,a);this.renderErrorState()}}populateCategoryFilter(){const a=document.getElementById(`category-filter`);if(!a)return;const b=[...new Set(this.examples.map(a=>a.category))];a.innerHTML=`<option value="all">All Categories</option>`;b.forEach(b=>{const c=document.createElement(`option`);c.value=b.toLowerCase();c.textContent=b;a.appendChild(c)})}renderExamplesPanel(){const a=document.getElementById(`examples-list`);if(!a)return;if(this.filteredExamples.length===0){a.innerHTML=`<div class="loading-state">No examples found</div>`;return};const b=this.groupByCategory(this.filteredExamples);a.innerHTML=Object.entries(b).map(([a,b])=>this.renderCategory(a,b)).join(``)}groupByCategory(a){return a.reduce((a,b)=>{const c=b.category;if(!a[c]){a[c]=[]};a[c].push(b);return a},{})}renderCategory(a,b){return `
            <div class="example-category" data-category="${a}">
                <h4 class="category-title">${a}</h4>
                <div class="category-examples">
                    ${b.map(a=>this.renderExample(a)).join(``)}
                </div>
            </div>
        `}renderExample(a){const b=this.currentExample===a.id?`active`:``;return `
            <div class="example-item ${b}" data-example-id="${a.id}">
                <div class="example-content">
                    <div class="example-title">${a.title}</div>
                    <div class="example-description">${a.description}</div>
                </div>
                <button class="copy-link-btn" data-example-id="${a.id}" title="Copy link to this example">
                    📋
                </button>
            </div>
        `}renderErrorState(){const a=document.getElementById(`examples-list`);if(a){a.innerHTML=`
                <div class="loading-state" style="color: #fb4934;">
                    Failed to load examples. Please refresh the page.
                </div>
            `}}bindEventListeners(){let f=`.copy-link-btn`,e=`click`;const a=document.getElementById(`examples-list`);if(a){a.addEventListener(e,a=>{if(a.target.closest(f)){a.stopPropagation();const b=a.target.closest(f);const c=b.dataset.exampleId;this.copyExampleLink(c);return};const b=a.target.closest(`.example-item`);if(b){const a=b.dataset.exampleId;this.loadExample(a)}})};const b=document.getElementById(`example-search`);if(b){b.addEventListener(`input`,a=>{this.searchTerm=a.target.value.toLowerCase();this.filterExamples()})};const c=document.getElementById(`category-filter`);if(c){c.addEventListener(`change`,a=>{this.currentCategory=a.target.value;this.filterExamples()})};const d=document.getElementById(`examples-collapse-btn`);if(d){d.addEventListener(e,()=>{this.togglePanel()})}}filterExamples(){this.filteredExamples=this.examples.filter(a=>{const b=this.currentCategory===`all`||a.category.toLowerCase()===this.currentCategory;const c=this.searchTerm===``||a.title.toLowerCase().includes(this.searchTerm)||a.description.toLowerCase().includes(this.searchTerm);return b&&c});this.renderExamplesPanel()}async loadExample(a){let b=`example`;try{if(window.clearErrorMarkers){window.clearErrorMarkers()};const c=window.wasmBindings.load_example(a);const d=JSON.parse(c);if(d.error){console.error(`Example load error:`,d.error);this.showError(`Failed to load example: ${d.error}`);return};this.currentExample=a;updateQueryParam(`code`,d.code);updateQueryParam(`canvas`,d.canvas);updateQueryParam(b,a);const e=window.editorInstance||window.editor;const f=document.getElementById(`canvas-input`);if(e&&f){const c=decodeAndInflate(d.code);const g=decodeAndInflate(d.canvas);e.setValue(c,-1);f.value=g;this.updateActiveExample(a);if(window.wasmBindings.compile_dsl&&window.wasmBindings.update_canvas){window.wasmBindings.update_canvas(g);window.wasmBindings.compile_dsl(c)};updateQueryParam(b,null);console.log(`Loaded example: ${d.title}`)}else{console.error(`Editor or canvas input not found`)}}catch(a){console.error(`Failed to load example:`,a);this.showError(`Internal error loading example`)}}updateActiveExample(a){let c=`active`;document.querySelectorAll(`.example-item`).forEach(a=>{a.classList.remove(c)});const b=document.querySelector(`[data-example-id="${a}"]`);if(b){b.classList.add(c)}}togglePanel(){let c=`collapsed`;const a=document.getElementById(`examples-panel`);const b=document.getElementById(`examples-collapse-btn`);if(a&&b){const d=a.classList.contains(c);if(d){a.classList.remove(c);b.textContent=`←`;b.title=`Collapse examples panel`}else{a.classList.add(c);b.textContent=`→`;b.title=`Expand examples panel`}}}showError(a){if(window.showError){window.showError(a)}else{console.error(`Example Panel Error:`,a)}}loadExampleById(a){const b=this.examples.find(b=>b.id===a);if(b){this.loadExample(a);return !0};return !1}getAvailableExamples(){return this.examples.map(a=>({id:a.id,title:a.title,category:a.category,description:a.description}))}async copyExampleLink(a){try{const b=window.location.origin+ window.location.pathname;const c=`${b}?example=${a}`;await navigator.clipboard.writeText(c);if(window.showError){window.showError(`Link copied: ${c}`)}else{console.log(`Link copied: ${c}`)}}catch(b){console.error(`Failed to copy link:`,b);const c=document.createElement(`textarea`);const d=window.location.origin+ window.location.pathname;const e=`${d}?example=${a}`;c.value=e;document.body.appendChild(c);c.select();try{document.execCommand(`copy`);if(window.showError){window.showError(`Link copied: ${e}`)}}catch(a){if(window.showError){window.showError(`Failed to copy link to clipboard`)}}document.body.removeChild(c)}}}window.ExamplePanel=ExamplePanel