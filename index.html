<!doctype html><html lang=en><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0,user-scalable=no" name=viewport><link href=https://cdnjs.cloudflare.com/ajax/libs/firacode/6.2.0/fira_code.min.css rel=stylesheet><link href=/tachyonfx-ftl/main-70b46e50ce4dfdf8.css integrity=sha384-6EInNvhH5gg326brq3qdP8RlQAFCphOKOFbwP2+KKtyOCdyUo17wLKt+gNCx+Vij rel=stylesheet><link href=/tachyonfx-ftl/components-abcf06cd92f8036a.css integrity=sha384-maPANsMFHYDUM0vtjhhtfJoshmCgRqRKA6t4jLsP3JGRmsOzdvnepKQBx0BM9Dnk rel=stylesheet><script type=module>import init, * as bindings from '/tachyonfx-ftl/tachyonfx-ftl-web-bcceb98e46b501d8.js';
const wasm = await init({ module_or_path: '/tachyonfx-ftl/tachyonfx-ftl-web-bcceb98e46b501d8_bg.wasm' });


window.wasmBindings = bindings;


dispatchEvent(new CustomEvent("TrunkApplicationStarted", {detail: {wasm}}));</script><title>TachyonFX FTL: Effect DSL editor and previewer</title><link crossorigin href=/tachyonfx-ftl/tachyonfx-ftl-web-bcceb98e46b501d8.js integrity=sha384-S6HRWXtjh/SGlntYB9f8rcsc3piz70MtNb+trXWGK4eLA182QX0FtZjHdbYmmDxX rel=modulepreload><link as=fetch crossorigin href=/tachyonfx-ftl/tachyonfx-ftl-web-bcceb98e46b501d8_bg.wasm integrity=sha384-tCf7hgnvQBWOzO2vt+I3uHm9XlIn9AH6RufcZHeB7Ywaw3NcqtAYcF0Bb0qM64GW rel=preload type=application/wasm></head><body><div class=github-header><div class=backend-switcher><span class=backend-label>Backend:</span><a onclick="switchBackend('webgl2')" class=backend-link href=# id=webgl2-link>WebGL2</a><span class=backend-separator>|</span><a onclick="switchBackend('canvas')" class=backend-link href=# id=canvas-link>Canvas</a></div><div class=github-links><a href=https://github.com/junkdog/tachyonfx target=_blank> <svg viewbox="0 0 24 24" fill=none height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M12 2C6.477 2 2 6.477 2 12C2 16.418 4.865 20.166 8.84 21.494C9.34 21.591 9.52 21.275 9.52 21.003C9.52 20.755 9.512 20.023 9.508 19.164C6.726 19.8 6.14 17.782 6.14 17.782C5.685 16.642 5.029 16.328 5.029 16.328C4.132 15.679 5.098 15.691 5.098 15.691C6.094 15.763 6.628 16.759 6.628 16.759C7.521 18.26 8.97 17.83 9.54 17.565C9.637 16.928 9.911 16.498 10.211 16.258C7.974 16.016 5.62 15.131 5.62 11.312C5.62 10.223 6.01 9.334 6.648 8.642C6.54 8.381 6.201 7.449 6.748 6.091C6.748 6.091 7.588 5.817 9.496 7.091C10.3 6.867 11.151 6.756 12 6.751C12.849 6.756 13.7 6.867 14.505 7.091C16.412 5.817 17.251 6.091 17.251 6.091C17.799 7.449 17.459 8.381 17.352 8.642C17.99 9.334 18.379 10.223 18.379 11.312C18.379 15.142 16.021 16.013 13.778 16.251C14.152 16.547 14.489 17.136 14.489 18.036C14.489 19.322 14.476 20.675 14.476 21.003C14.476 21.278 14.655 21.597 15.165 21.493C19.137 20.164 22 16.417 22 12C22 6.477 17.523 2 12 2Z" fill=currentColor /></svg> tachyonfx </a><a href=https://github.com/junkdog/tachyonfx-ftl target=_blank> <svg viewbox="0 0 24 24" fill=none height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M12 2C6.477 2 2 6.477 2 12C2 16.418 4.865 20.166 8.84 21.494C9.34 21.591 9.52 21.275 9.52 21.003C9.52 20.755 9.512 20.023 9.508 19.164C6.726 19.8 6.14 17.782 6.14 17.782C5.685 16.642 5.029 16.328 5.029 16.328C4.132 15.679 5.098 15.691 5.098 15.691C6.094 15.763 6.628 16.759 6.628 16.759C7.521 18.26 8.97 17.83 9.54 17.565C9.637 16.928 9.911 16.498 10.211 16.258C7.974 16.016 5.62 15.131 5.62 11.312C5.62 10.223 6.01 9.334 6.648 8.642C6.54 8.381 6.201 7.449 6.748 6.091C6.748 6.091 7.588 5.817 9.496 7.091C10.3 6.867 11.151 6.756 12 6.751C12.849 6.756 13.7 6.867 14.505 7.091C16.412 5.817 17.251 6.091 17.251 6.091C17.799 7.449 17.459 8.381 17.352 8.642C17.99 9.334 18.379 10.223 18.379 11.312C18.379 15.142 16.021 16.013 13.778 16.251C14.152 16.547 14.489 17.136 14.489 18.036C14.489 19.322 14.476 20.675 14.476 21.003C14.476 21.278 14.655 21.597 15.165 21.493C19.137 20.164 22 16.417 22 12C22 6.477 17.523 2 12 2Z" fill=currentColor /></svg> tachyonfx-ftl </a></div></div><div id=container><div class=panel-collapsible id=examples-panel><div class=examples-header><button class=panel-toggle id=examples-collapse-btn>←</button><h3>Examples</h3></div><div class=examples-content><div class=examples-search><input placeholder="Search examples..." id=example-search></div><div class=examples-filter><select id=category-filter><option value=all>All Categories</option></select></div><div class=examples-list id=examples-list><div class=loading-state>Loading examples...</div></div></div></div><div id=editor-section><div id=editor></div><textarea placeholder="Paste ANSI-escaped ASCII here..." id=canvas-input></textarea></div><div id=divider></div><div id=content></div></div><div class=error-toast id=error-toast><div class=error-icon>⚠️</div><div class=error-message id=error-message></div><button class=close-error id=close-error>×</button></div><script src=https://cdn.jsdelivr.net/npm/pako@2.1.0/dist/pako.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/ace/1.43.3/ace.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/ace/1.43.3/ext-language_tools.js></script><script integrity=sha384-qxlys+TKWiNydD1ovb1nQHwNbAM0GMbwiHC2BkWDdiN8rwHKCZXCtX4jPul/RSna src=/tachyonfx-ftl/scripts/completions-ce58c24038053050.js></script><script integrity=sha384-ZbAGVURdXiv1ToXqLGtDU2Sqc5sSIgvtV7oL4MaCKPu9ptFFKkEgnY7fu/A3sLGF src=/tachyonfx-ftl/scripts/redirect-7f8bd5a6fd089343.js></script><script integrity=sha384-BiXaW2n2avsElxWJWYU3+hjg1rFde0dd5c7clZLENJeokx/pXWLiLT8baPx8KYx2 src=/tachyonfx-ftl/scripts/editor-8e8d95b8f737f2d9.js></script><script integrity=sha384-Rn2vmczb1bhrgo7EHJos/afX/Ft9uBBNvBM9/umczSoXFmD+ZRo6maJwodE0Vr8I src=/tachyonfx-ftl/scripts/query-params-9f8d98d5555a3d3c.js></script><script integrity=sha384-ixzeic8AbkR3YwpVOcSBJ6WNQapkDeGmSmM0jpGejcRld+bq2uZl6qi+8Fhp9t9q src=/tachyonfx-ftl/scripts/examples-1f70c91865b4ab01.js></script><script>var clearErrorMarkers=(()=>{let a=undefined;if(window.currentErrorMarker!==a){editor.session.removeMarker(window.currentErrorMarker);window.currentErrorMarker=a};if(window.currentLineMarker!==a){editor.session.removeMarker(window.currentLineMarker);window.currentLineMarker=a};editor.session.clearAnnotations()});var showError=(a=>{let b=`show`;clearTimeout(errorTimeout);errorMessage.textContent=a;errorToast.classList.add(b);errorTimeout=setTimeout(()=>{errorToast.classList.remove(b)},10000)});var highlightCurrentBackend=(()=>{let d=`active`;const a=new URLSearchParams(window.location.search);const b=a.get(`backend`)||`webgl2`;document.querySelectorAll(`.backend-link`).forEach(a=>{a.classList.remove(d)});const c=document.getElementById(b+ `-link`);if(c){c.classList.add(d)}});Error.stackTraceLimit=100;window.switchBackend=(a=>{const b=new URLSearchParams(window.location.search);b.set(`backend`,a);window.location.href=window.location.pathname+ `?`+ b.toString()});highlightCurrentBackend();const editor=setupEditor();editor.completers=[tfxCustomCompleter];console.log(`completions loaded`,tfxCustomCompleter);const canvasInput=document.getElementById(`canvas-input`);const errorToast=document.getElementById(`error-toast`);const errorMessage=document.getElementById(`error-message`);const closeError=document.getElementById(`close-error`);window.dsl_error_callback=(a=>{let c=1,b=`show`;console.log(`Error callback received:`,a);try{const d=JSON.parse(a);errorMessage.textContent=`${d.line}:${d.column} ${d.message}`;errorToast.classList.add(b);const e=d.line- c;const f=d.column- c;const g=d.line_end- c;const h=d.column_end;editor.navigateTo(e,f);editor.scrollToLine(e,!0,!0,(()=>{}));editor.focus();editor.session.clearAnnotations();if(window.currentErrorMarker!==undefined){editor.session.removeMarker(window.currentErrorMarker)};editor.session.setAnnotations([{row:e,column:f,text:d.message,type:`error`}]);const i=new ace.Range(e,f,g,h);window.currentErrorMarker=editor.session.addMarker(i,`error-marker`,`text`,!1);window.currentLineMarker=editor.session.addMarker(new ace.Range(e,0,e,Infinity),`error-line`,`fullLine`,!1)}catch(c){console.error(`Error parsing error data:`,c);errorMessage.textContent=a;errorToast.classList.add(b)}});closeError.addEventListener(`click`,()=>{errorToast.classList.remove(`show`);clearErrorMarkers()});window.clearErrorMarkers=clearErrorMarkers;window.editorInstance=editor;window.showError=showError;let errorTimeout;window.addEventListener(`TrunkApplicationStarted`,a=>{let f=100;console.log(`TrunkApplicationStarted event received`);encodeDefaultCodeAndCanvasOnMissing();updateCodeAndCanvas(editor,canvasInput);console.log(`post redirect`);console.log(`wasmBindings`,window.wasmBindings);window.wasmBindings.update_canvas(document.getElementById(`canvas-input`).value);window.examplePanel=new ExamplePanel();console.log(`Examples panel initialized`);const b=new URLSearchParams(window.location.search);const c=b.get(`example`);if(c&&window.examplePanel){setTimeout(()=>{if(window.examplePanel.loadExampleById(c)){console.log(`Loaded example from URL: ${c}`)}else{console.warn(`Example not found: ${c}`)}},f)};const d=document.getElementById(`editor`);const e=document.createElement(`button`);e.id=`run-button`;e.innerHTML=`<span class="icon">▶</span><span>Run</span><span class="tooltip">(Ctrl+S, Cmd+S)</span>`;d.appendChild(e);e.addEventListener(`click`,()=>{clearErrorMarkers();errorToast.classList.remove(`show`);const a=editor.getValue(0);const b=deflateAndEncode(a);updateQueryParam(`code`,b);const c=deflateAndEncode(canvasInput.value);updateQueryParam(`canvas`,c);try{window.wasmBindings.compile_dsl(a);console.log(`DSL code sent to Rust for compilation`)}catch(a){console.error(`Error calling Rust compile_dsl:`,a);showError(`Internal error: `+ a.toString())}});setTimeout(()=>{e.click()},f)});window.addEventListener(`keydown`,a=>{if((a.ctrlKey||a.metaKey)&&a.key===`s`){a.preventDefault();clearErrorMarkers();errorToast.classList.remove(`show`);const b=editor.getValue(0);const c=deflateAndEncode(b);updateQueryParam(`code`,c);const d=deflateAndEncode(canvasInput.value);updateQueryParam(`canvas`,d);try{window.wasmBindings.compile_dsl(b);console.log(`DSL code sent to Rust for compilation`)}catch(a){console.error(`Error calling Rust compile_dsl:`,a);showError(`Internal error: `+ a.toString())}}});canvasInput.addEventListener(`input`,()=>{const a=canvasInput.value;const b=deflateAndEncode(a);console.log(`Compressed buffer (base64):`,b);updateQueryParam(`canvas`,b);try{console.log(`sending canvas event to Rust`);console.log(`Canvas update sent to Rust`);window.wasmBindings.update_canvas(a)}catch(a){console.error(`Error calling Rust update_canvas:`,a);showError(`Error updating canvas: `+ a.toString())}});const divider=document.getElementById(`divider`);const editorEl=document.getElementById(`editor-section`);const contentEl=document.getElementById(`content`);const examplesPanel=document.getElementById(`examples-panel`);let isDragging=!1;divider.addEventListener(`mousedown`,()=>(isDragging=!0));window.addEventListener(`mouseup`,()=>(isDragging=!1));window.addEventListener(`mousemove`,a=>{let j=`none`,i=300,k=`px`,h=Math;if(!isDragging)return;const b=examplesPanel.classList.contains(`collapsed`)?0:examplesPanel.offsetWidth;const c=divider.offsetWidth;const d=window.innerWidth- b- c;const e=a.clientX- b;const f=h.max(i,h.min(e,d- i));const g=d- f;editorEl.style.flex=j;editorEl.style.width=f+ k;contentEl.style.flex=j;contentEl.style.width=g+ k;editor.resize()});console.log(`finished setting up editor`)</script></body></html>